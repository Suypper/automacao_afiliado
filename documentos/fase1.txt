üìÑ PROJETO: REMIX FACTORY (MVP DE AFILIADOS)
1. Vis√£o Geral
Sistema automatizado para identificar produtos f√≠sicos em marketplaces (Shopee/AliExpress), extrair m√≠dias existentes, reescrever roteiros focados em reten√ß√£o (psicologia de vendas) e remixar novos v√≠deos curtos para TikTok/Reels sem interven√ß√£o humana na edi√ß√£o.

2. Stack Tecnol√≥gica
Orquestrador: n8n (Self-hosted/Cloud).

Banco de Dados: Supabase (PostgreSQL).

Scraping: Apify (Actor: shopee-product-scraper ou similar).

Intelig√™ncia (C√©rebro): OpenAI (GPT-4o).

Produ√ß√£o de V√≠deo: Creatomate API (Edi√ß√£o baseada em JSON).

Input Inicial: Trigger Manual ou Google Sheets.

3. Estrutura de Dados (Supabase)
Tabela: produtos_afiliados

id (uuid, PK)

url_produto (text) - Link da loja.

nome_produto (text)

descricao_raw (text)

imagens_urls (text[]) - Array de links.

video_origem_url (text) - Link do v√≠deo baixado do marketplace.

status (text) - Estados: novo, processado, erro, aprovado.

4. Arquitetura dos Fluxos (Workflows)
O projeto ser√° dividido em 3 workflows modulares no n8n.

üîÑ Workflow 01: O Hunter (Ingest√£o de Dados)
Objetivo: Receber um link, baixar os assets brutos e salvar no banco.

Entrada: Manual Trigger (Teste) ou Google Sheets Row.

Processamento:

Chama API do Apify para scrapear a URL.

Filtra o JSON para obter apenas: Nome, Descri√ß√£o, Array de Imagens e URL do V√≠deo.

Verifica se o v√≠deo existe (se n√£o existir, aborta ou marca como 'sem_video').

Sa√≠da: Insert na tabela produtos_afiliados.

üß† Workflow 02: O Copywriter (Cria√ß√£o de Roteiro)
Objetivo: Transformar dados t√©cnicos em roteiro viral.

Gatilho: Database Trigger (Supabase: quando nova linha √© criada).

Processamento:

LLM analisa a descricao_raw.

LLM gera Roteiro (JSON estruturado para edi√ß√£o).

LLM gera Legendas e Copy para redes sociais.

Sa√≠da: Update na tabela produtos_afiliados preenchendo a coluna roteiro_gerado.

üé¨ Workflow 03: O Editor (Renderiza√ß√£o)
Objetivo: Gerar o MP4 final.

Gatilho: Webhook ou Bot√£o de Aprova√ß√£o (Futuro).

Processamento:

Envia JSON do roteiro + URLs de m√≠dia para Creatomate API.

Aguarda renderiza√ß√£o.

Salva URL do v√≠deo final no Supabase.


@n8n Contexto do Projeto: Estamos criando uma automa√ß√£o de afiliados SEM CUSTO de IA. Trocamos OpenAI por Groq/Llama3. J√° tenho a tabela 'produtos_afiliados' no Supabase.

TAREFA: Crie o c√≥digo JSON do workflow "Ingest√£o de Produtos" (Fase 1).

Especifica√ß√µes do Workflow:
1. Trigger: Use um n√≥ "Manual Trigger" (para teste r√°pido).
   - Simule um output JSON: { "url_produto": "https://shopee.com.br/exemplo" }

2. Action (Scraping): N√≥ "HTTP Request" para a API do Apify.
   - Method: POST
   - URL Placeholder: 'https://api.apify.com/v2/acts/shopee-scrapper/run-sync-get-dataset-items'
   - Body: { "startUrls": [{ "url": "={{ $json.url_produto }}" }] }
   - Auth: Header 'Authorization: Bearer SEU_TOKEN_APIFY'

3. Transformation (Limpeza): N√≥ "Code" (JavaScript).
   - O c√≥digo deve filtrar o retorno do Apify.
   - Retornar objeto: {
       nome_produto: item.title,
       descricao_raw: item.description,
       video_origem_url: item.videoUrl, (ou null se n√£o tiver)
       imagens_urls: item.images, (array)
       url_produto: $json.url_produto
     }

4. Action (Intelig√™ncia - Opcional agora, mas deixe o espa√ßo):
   - Adicione um n√≥ "Comment" escrito: "Aqui entra o Groq/Llama3 depois".

5. Database Load: N√≥ "Supabase".
   - Operation: Insert.
   - Table: 'produtos_afiliados'.
   - Columns: Mapeie os campos do n√≥ "Code".

Gere o JSON pronto para colar no n8n.